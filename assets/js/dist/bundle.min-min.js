"use strict";!function(n){function e(o){if(t[o])return t[o].exports;var a=t[o]={exports:{},id:o,loaded:!1};return n[o].call(a.exports,a,a.exports,e),a.loaded=!0,a.exports}var t={};return e.m=n,e.c=t,e.p="",e(0)}([function(n,e,t){function o(n){return n&&n.__esModule?n:{default:n}}var a=t(1),i=o(a);!function(){new i.default}()},function(n,e){function t(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function n(n,e){for(var t=0;t<e.length;t++){var o=e[t];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(n,o.key,o)}}return function(e,t,o){return t&&n(e.prototype,t),o&&n(e,o),e}}(),a=location.protocol+"//"+location.hostname+(location.port?":"+location.port:"")+"/tests/2/admin/api/",i=function(){function n(){t(this,n);var e=self;this.modules="",this.init(e)}return o(n,[{key:"ajax_modules",value:function(n){return new Promise(function(e,t){$.ajax({type:"GET",url:n,dataType:"json",success:function(n,t,o){e(n)},error:function(n){t(new Error(n.statusText))}})})}},{key:"modules_storage",value:function(n){var e=this;new Promise(function(t,o){e.modules=n,t(n)})}},{key:"load_modules_list",value:function(){var n=this;this.ajax_modules(a+"modules_list/").then(function(e){return n.modules_storage(e)}).catch(function(n){return console.log(n)})}},{key:"init",value:function(n){var e=this;e.load_modules_list(),$("#create_page").on("submit",function(n){n.preventDefault();var t=$(this).serialize(),o=$(this).serializeArray();console.log(o);var i=this;$.ajax({url:a+"create_page",type:"POST",data:t,success:function(n){$(i).find("input[type=submit]").prop("disabled",!0);var t=o[2].value,r=$("option:selected",i).attr("modules");$("#modules").html("");var s="",u=e.modules.modules_list;u.forEach(function(n){s+='<option value="'+n.id+'">'+n.name+"</option>"});for(var l=0;l<r;l++)$("#modules").append('\n                            <form class="area_form'+l+'" method="post" onsubmit="event.preventDefault();">\n                                <input type="hidden" id="layout_areas" name="layout_areas" value="'+t+'"/>\n                                <input type="hidden" id="page_id" name="page_id" value="'+n+'"/>\n                                <div class="line">\n                                    <label for="layout"> Area '+l+': Select Module</label>\n                                    <select name="select-module" class="select-module'+l+'">\n                                        <option>  </option>'+s+'</select>\n                                </div>\n                                <div class="line">\n                                    <div class="controls">\n                                    <input type="submit" name="submit" class="button" id="submit_btn" value="Submit" />\n                                    </div>\n                                </div>\n                                </form>\n                                <div class="configuration'+l+'"></div>\n                                <script type="application/javascript" charset="UTF-8">\n                                    //submit area\n                                    $(\'.area_form'+l+"').on('submit', function(){\n                                         let form_data = $(this).serialize();\n                                         let form_arr = $(this).serializeArray();\n                                         let module_id = form_arr[2]['value'];\n                                         let _this = this;\n                                         //+e.target.value\n                                        $.ajax({\n                                            type: \"POST\",\n                                            url:\""+a+"insert_area\",\n                                            data: form_data,\n                                            success:function(area_id){\n                                                $(_this).find('input[type=submit]').prop('disabled', true);\n                                                //show module configuration form \n                                                $.ajax({\n                                                    type:\"GET\",\n                                                    url: '"+a+"load_configuration_form/'+module_id+'/'+area_id,\n                                                    success:function(data){\n                                                        $('.configuration"+l+"').html();\n                                                        $('.configuration"+l+"').append(data);\n                                                    },\n                                                    error:function(){\n                                                    \n                                                    }\n                                                });\n                                                console.log('success');\n                                            },\n                                            error: function(){\n                                                console.log('error');\n                                            }\n                                        });\n                                    });\n                                </script>\n                                ")},error:function(){console.log("nooo")}}),console.log("yeahhhhh")})}}]),n}();e.default=i}]);